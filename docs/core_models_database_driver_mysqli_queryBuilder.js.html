<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/models/database/driver/mysqli/queryBuilder.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/models/database/driver/mysqli/queryBuilder.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Class representing CRUD operations which will be responsible for generating 
 * sql queries and returning them for all the CRUD operations i.e, create, delete,
 * list and update. These CRUD operations are performed for the specific entity which
 * has key value pair. After these queries are generated dynamically, they are returned.
 * This class is responsible for generating and building the queries dynamically for
 * the purpose of further executing it.
 */
class QueryBuilder {

    /**
     * Forms the insert sql query for inserting records in database. The query is
     * generated by making the strings of keys and values which are obtained from the
     * entity object which is passed as a parameter in the method. After the insert query
     * is generated then it is returned which will be executed later.
     * @param {Object} entity 
     * @returns {string} the sql query.
     */
    create(entity) {
        let keyString = "", valueString = "";
        for (const key in entity) {
            if (key != 'tableName' &amp;&amp; key != 'id') {
                keyString += key + ',';
                valueString += "'" + entity[key] + "'" + ',';
            }
        }
        keyString = keyString.substring(0, keyString.length - 1);
        valueString = valueString.substring(0, valueString.length - 1);
        return (`INSERT INTO ${entity.tableName} (${keyString}) VALUES (${valueString})`);
    }

    /**
    * Forms the update sql query for updating records of database. The query is
    * generated by making the strings of keys and values which are obtained from the
    * entity object which is passed as a parameter in the method. After the update query
    * is generated then it is returned which will be executed later.
    * @param {Object} entity 
    * @returns {string} the sql query.
    */
    update(entity) {
        let keyString = "";
        let valueString = "'" + entity['id'] + "'";
        for (const key in entity) {
            if (key != 'tableName') {
                keyString += key + '=' + "'" + entity[key] + "'" + ',';
            }
        }
        keyString = keyString.substring(0, keyString.length - 1);
        return (`UPDATE ${entity.tableName} SET ${keyString} WHERE id=${valueString}`);
    }

    /**
    * Forms the delete sql query for deleting records from database based on the id column. 
    * The query is generated by making the strings of keys and values which are obtained 
    * from the entity object which is passed as a parameter in the method. After the delete 
    * query is generated then it is returned which will be executed later.
    * @param {Object} entity 
    * @returns {string} the sql query.
    */
    delete(entity) {
        let valueString = "'" + entity['id'] + "'";
        return (`DELETE FROM ${entity.tableName} WHERE id=(${valueString})`);
    }

    /**
    * Forms the select sql query for fetching all the records from database. 
    * The query is generated by taking the table name which is obtained from the entity object 
    * which is passed as a parameter in the method. After the select query is generated then it 
    * is returned which will be executed later.
    * @param {object} entity 
    * @returns {string} the sql query.
    */
    list(entity) {
        return (`SELECT * FROM ${entity.tableName}`);
    }
}
module.exports = QueryBuilder;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Autoload.html">Autoload</a></li><li><a href="ControllerFactory.html">ControllerFactory</a></li><li><a href="CourseController.html">CourseController</a></li><li><a href="CourseMetaData.html">CourseMetaData</a></li><li><a href="CourseModel.html">CourseModel</a></li><li><a href="CRUDModel.html">CRUDModel</a></li><li><a href="DbFactory.html">DbFactory</a></li><li><a href="DefaultController.html">DefaultController</a></li><li><a href="Dispatcher.html">Dispatcher</a></li><li><a href="Driver.html">Driver</a></li><li><a href="ErrorController.html">ErrorController</a></li><li><a href="ModelFactory.html">ModelFactory</a></li><li><a href="QueryBuilder.html">QueryBuilder</a></li><li><a href="Request.html">Request</a></li><li><a href="Response.html">Response</a></li><li><a href="RestController.html">RestController</a></li><li><a href="StudentController.html">StudentController</a></li><li><a href="StudentMetaData.html">StudentMetaData</a></li><li><a href="StudentModel.html">StudentModel</a></li><li><a href="TeacherController.html">TeacherController</a></li><li><a href="TeacherMetaData.html">TeacherMetaData</a></li><li><a href="TeacherModel.html">TeacherModel</a></li><li><a href="ViewManager.html">ViewManager</a></li></ul><h3>Global</h3><ul><li><a href="global.html#serverConnection">serverConnection</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Tue Aug 17 2021 17:08:09 GMT+0500 (Pakistan Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
